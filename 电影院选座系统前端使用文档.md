# 电影院选座系统前端使用文档

## 项目概述

这是一个基于 Vue 3 和 TypeScript 开发的电影院选座系统前端应用。该系统允许用户登录、浏览影院和场次信息、选择座位并管理订单。

## 技术栈

- Vue 3 (Composition API)
- TypeScript
- Vue Router
- Pinia (状态管理)
- Axios (HTTP 客户端)
- CSS (样式)

## 项目结构

```
src/
├── api/                # API 接口定义
│   ├── auth.ts         # 认证相关接口
│   ├── cinema.ts       # 影院和场次相关接口
│   ├── request.ts      # HTTP 请求配置
│   └── seats.ts        # 座位和订单相关接口
├── assets/             # 静态资源
├── components/         # 公共组件
├── router/             # 路由配置
├── stores/             # Pinia 状态管理
├── types/              # TypeScript 类型定义
├── views/              # 页面视图组件
├── App.vue             # 根组件
└── main.ts             # 应用入口
```

## 功能模块

### 1. 用户认证模块

**登录页面** (`LoginView.vue`):
- 用户通过用户名和密码登录系统
- 登录成功后会保存 token 到本地存储
- 登录成功后跳转到影院列表页面

**API 接口** (`api/auth.ts`):
- `login`: 用户登录接口，返回用户信息和 token

### 2. 影院和场次模块

**影院列表页面** (`CinemaListView.vue`):
- 显示系统中所有影院
- 可以按日期筛选场次
- 展示电影标题、影厅名称和开始时间
- 点击场次可跳转到选座页面

**API 接口** (`api/cinema.ts`):
- `getCinemas`: 获取所有影院信息
- `getSchedules`: 根据影院 ID 和日期获取场次信息

### 3. 座位选择模块

**选座页面** (`SeatSelectionView.vue`):
- 显示影厅座位图
- 座位状态显示（可用、已锁定、已售出）
- 支持多选座位
- 提供锁定座位功能

**API 接口** (`api/seats.ts`):
- `getSeatMap`: 获取座位图信息
- `lockSeats`: 锁定选中座位（创建订单）
- `payOrder`: 支付订单
- `getMyOrders`: 获取用户订单列表

### 4. 订单管理模块

**我的订单页面** (`MyOrdersView.vue`):
- 显示用户的所有订单
- 显示订单状态（待支付、已支付、已取消）
- 支持在线支付功能

## 状态管理

使用 Pinia 进行全局状态管理，主要管理用户信息：

- `id`: 用户 ID
- `username`: 用户名
- `name`: 用户姓名
- `token`: 认证令牌

## 路由配置

- `/login`: 登录页面
- `/`: 重定向到影院列表
- `/cinemas`: 影院和场次列表
- `/schedules/:id/seats`: 座位选择页面（需要场次 ID）
- `/orders`: 我的订单页面

## API 请求配置

所有 API 请求都通过 `api/request.ts` 进行配置：
- 基础 URL 为 `/api`
- 自动在请求头中添加 token
- 拦截 401 响应并跳转到登录页面

## 使用说明

### 启动项目

1. 确保后端服务已启动（API 服务器）
2. 安装依赖：`npm install`
3. 启动前端：`npm run dev`

### 用户操作流程

1. **登录系统**：
   - 访问 `/login` 页面
   - 输入用户名和密码（示例：用户名 `user1`，密码 `123456`）
   - 点击登录按钮

2. **浏览影院和场次**：
   - 登录后自动跳转到 `/cinemas` 页面
   - 选择影院和日期
   - 查看场次列表并点击选择

3. **选择座位**：
   - 进入选座页面
   - 点击可用座位进行选择（绿色为可用，灰色为不可用）
   - 点击"锁定选中座位"按钮完成选座

4. **管理订单**：
   - 点击导航栏的"我的订单"
   - 查看订单状态
   - 点击"立即支付"完成支付

## 组件说明

### 座位状态颜色说明

- 绿色：可用座位
- 灰色：已售出或锁定的座位
- 蓝色：已选择的座位

### 路由守卫

系统实现了路由守卫，未登录用户访问非登录页面时会自动跳转到登录页。

## API 类型定义

### 用户相关
- `LoginDTO`: 登录数据传输对象
- `UserInfo`: 用户信息对象

### 影院相关
- `Cinema`: 影院信息
- `Schedule`: 场次信息

### 座位相关
- `Seat`: 座位信息
- `SeatMap`: 座位图信息
- `CreateOrderDTO`: 创建订单数据传输对象
- `OrderItem`: 订单项信息

### 通用类型
- `Result<T>`: API 响应统一格式

## 注意事项

1. 确保后端服务已启动，前端默认请求 `/api` 路径
2. 系统依赖本地存储保存用户认证信息
3. 选座功能需要先登录才能使用
4. 座位选择后需要在规定时间内完成支付，否则订单会被取消

## 扩展功能

该前端项目设计灵活，可以轻松扩展以下功能：
- 电影详情展示
- 优惠券系统
- 用户评价功能
- 会员积分系统
- 更多支付方式集成
        